# 遇到问题如何排查错误

## 一、查看 heki 日志

最简单的方法就是看日志，使用了哪些软件就查看哪些软件的日志，这里提供查看 heki 日志的方法

### 脚本安装的 heki
使用`heki log`命令查看 heki 日志，观察日志是否有异常

### docker 安装的 heki
使用`docker logs <镜像名>`查看 heki 日志，观察日志是否有异常

## 二、查看 heki debug 日志

有时候默认日志等级(info)不足以判断问题所在，那么就需要设置 debug 日志等级

在配置文件中设置`log_level=debug`，使用 docker 则按 docker 的方式进行配置，并`重启 heki`

然后再根据上面的方法查看日志，此时日志内容将会更多，为判断问题提供帮助

## 三、排查其他地方

如果 heki 日志中看不出问题，则有可能问题出在其他地方，此时需要根据具体问题进行多方位排查

## 四、常见问题

### 启动失败
- 检查配置文件格式是否正确（key=value，每行一个）
- 检查 panel_url 是否以 http:// 或 https:// 开头
- 检查 panel_key 和 node_id 是否已填写
- 检查面板是否可以正常访问

### 用户无法连接
- 检查防火墙是否放行了对应端口
- 检查面板中节点配置是否正确
- 如果使用 TLS，检查证书是否配置正确
- 使用 `heki log` 查看是否有错误信息

### 证书申请失败
- HTTP 验证：确保 80 端口未被占用，域名已正确解析
- DNS 验证：确保 DNS 服务商配置正确，API 密钥有效
- 检查域名是否已完全生效（可使用 dig 或 nslookup 验证）

### 流量不上报
- 检查 panel_url 和 panel_key 是否正确
- 检查网络是否能正常访问面板
- 查看日志中是否有 API 请求错误
